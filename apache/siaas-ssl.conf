<VirtualHost *:80>

    ServerName siaas

    RewriteEngine On
    RewriteRule ^(.*)$ https://%{HTTP_HOST}$1 [R=301,L]

</VirtualHost>

<VirtualHost *:443>

    ServerName siaas

    ProxyPreserveHost On
    ProxyPass "/api" http://127.0.0.1:5000
    ProxyPassReverse "/api" http://127.0.0.1:5000

    SSLEngine on
    SSLOptions +StrictRequire
    SSLCertificateFile /etc/ssl/certs/siaas.crt
    SSLCertificateKeyFile /etc/ssl/private/siaas.key

    CustomLog /${APACHE_LOG_DIR}/siaas-access.log combined
    ErrorLog /${APACHE_LOG_DIR}/siaas-error.log

</VirtualHost>
